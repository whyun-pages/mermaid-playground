<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- 基础SEO标签 -->
    <title>Mermaid 演练场 - 在线图表编辑器 | 流程图、时序图、类图生成器</title>
    <meta name="description" content="免费的Mermaid在线演练场，支持流程图、时序图、类图、状态图、甘特图等多种图表类型。实时预览，代码高亮，一键导出PNG/SVG格式。">
    <meta name="keywords" content="mermaid,流程图,时序图,类图,状态图,甘特图,图表生成器,在线编辑器,diagram,flowchart,sequence diagram,class diagram,state diagram,gantt chart">
    <meta name="author" content="yunnysunny">
    <meta name="robots" content="index, follow">
    <meta name="language" content="zh-CN">
    
    <!-- 结构化数据 -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Mermaid 演练场",
        "description": "免费的Mermaid在线演练场，支持流程图、时序图、类图、状态图、甘特图等多种图表类型",
        "url": "https://mermaid-playground.pages.dev",
        "applicationCategory": "DeveloperApplication",
        "operatingSystem": "Web Browser",
        "offers": {
            "@type": "Offer",
            "price": "0",
            "priceCurrency": "USD"
        },
        "author": {
            "@type": "Person",
            "name": "yunnysunny"
        },
        "featureList": [
            "流程图生成",
            "时序图生成", 
            "类图生成",
            "状态图生成",
            "甘特图生成",
            "实时预览",
            "代码高亮",
            "PNG导出",
            "SVG导出"
        ]
    }
    </script>
    
    <!-- 图标和主题 -->
    <link rel="icon" href="/images/favicon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png">
    
    <!-- 样式表 -->
    <link rel="stylesheet" href="./src/styles/main.css">
</head>
<body>
    <div id="app">
        <!-- 导航菜单 -->
        <nav class="navbar">
            <div class="nav-brand">
                <h1>Mermaid 演练场</h1>
            </div>
            <div class="nav-user">
                <span class="name">未命名</span>
            </div>
            <div class="nav-controls">
                <div class="history-selector">
                    <button id="save-btn" class="btn btn-success">
                        <span class="icon">💾</span>
                        保存
                    </button>
                    <button id="history-toggle" class="btn btn-secondary">
                        <span class="icon">📚</span>
                        切换
                        <span class="dropdown-arrow">▼</span>
                    </button>
                    <div id="history-dropdown" class="dropdown hidden">
                        <div class="dropdown-content">
                            <div class="history-empty">
                                <div class="empty-text">暂无保存的代码</div>
                            </div>
                        </div>
                    </div>
                </div>
                <button id="export-btn" class="btn btn-primary">
                    <span class="icon">📤</span>
                    导出
                </button>
                <button id="settings-btn" class="btn btn-secondary">
                    <span class="icon">⚙️</span>
                    设置
                </button>
                <a href="https://github.com/whyun-pages/mermaid-playground" target="_blank" rel="noopener noreferrer" class="btn btn-github">
                    <svg class="github-icon" width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
                    </svg>
                    Star
                </a>
            </div>
        </nav>

        <!-- 导出选项下拉菜单 -->
        <div id="export-dropdown" class="dropdown hidden">
            <div class="dropdown-content">
                <div class="dropdown-item" data-format="png">PNG</div>
                <div class="dropdown-item" data-format="svg">SVG</div>
                <div class="dropdown-item" data-format="copy">复制SVG到剪贴板</div>
                <div class="dropdown-item" data-format="copy-png">复制PNG到剪贴板</div>
            </div>
        </div>

        <!-- 主要内容区域 -->
        <main class="main-content">
            <!-- 左侧代码编辑区 -->
            <div class="editor-section">
                <div class="section-header">
                    <h2>Mermaid 代码</h2>
                    <div class="template-selector">
                        <button id="template-toggle" class="btn btn-secondary">
                            <span class="icon">📋</span>
                            模板
                            <span class="dropdown-arrow">▼</span>
                        </button>
                        <div id="template-dropdown" class="dropdown hidden">
                            <div class="dropdown-content">
                                <div class="template-item" data-template="flowchart">
                                    <div class="template-name">流程图</div>
                                    <div class="template-preview">
                                        <svg width="120" height="80" viewBox="0 0 120 80">
                                            <rect x="10" y="10" width="30" height="20" fill="#e1f5fe" stroke="#01579b" stroke-width="1"/>
                                            <text x="25" y="22" font-size="8" text-anchor="middle" fill="#01579b">开始</text>
                                            <path d="M 40 20 L 50 20" stroke="#01579b" stroke-width="1" marker-end="url(#arrowhead)"/>
                                            <rect x="50" y="10" width="30" height="20" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
                                            <text x="65" y="22" font-size="8" text-anchor="middle" fill="#e65100">处理</text>
                                            <path d="M 80 20 L 90 20" stroke="#01579b" stroke-width="1" marker-end="url(#arrowhead)"/>
                                            <rect x="90" y="10" width="30" height="20" fill="#e8f5e8" stroke="#2e7d32" stroke-width="1"/>
                                            <text x="105" y="22" font-size="8" text-anchor="middle" fill="#2e7d32">结束</text>
                                            <defs>
                                                <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                                    <polygon points="0 0, 10 3.5, 0 7" fill="#01579b"/>
                                                </marker>
                                            </defs>
                                        </svg>
                                    </div>
                                </div>
                                <div class="template-item" data-template="sequence">
                                    <div class="template-name">时序图</div>
                                    <div class="template-preview">
                                        <svg width="120" height="80" viewBox="0 0 120 80">
                                            <line x1="20" y1="10" x2="20" y2="70" stroke="#01579b" stroke-width="2"/>
                                            <line x1="60" y1="10" x2="60" y2="70" stroke="#01579b" stroke-width="2"/>
                                            <line x1="100" y1="10" x2="100" y2="70" stroke="#01579b" stroke-width="2"/>
                                            <text x="20" y="85" font-size="8" text-anchor="middle" fill="#01579b">用户</text>
                                            <text x="60" y="85" font-size="8" text-anchor="middle" fill="#01579b">系统</text>
                                            <text x="100" y="85" font-size="8" text-anchor="middle" fill="#01579b">数据库</text>
                                            <path d="M 20 20 L 60 20" stroke="#01579b" stroke-width="1" marker-end="url(#arrowhead2)"/>
                                            <path d="M 60 40 L 100 40" stroke="#01579b" stroke-width="1" marker-end="url(#arrowhead2)"/>
                                            <path d="M 100 60 L 60 60" stroke="#01579b" stroke-width="1" marker-end="url(#arrowhead2)"/>
                                            <path d="M 60 80 L 20 80" stroke="#01579b" stroke-width="1" marker-end="url(#arrowhead2)"/>
                                            <defs>
                                                <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                                    <polygon points="0 0, 10 3.5, 0 7" fill="#01579b"/>
                                                </marker>
                                            </defs>
                                        </svg>
                                    </div>
                                </div>
                                <div class="template-item" data-template="class">
                                    <div class="template-name">类图</div>
                                    <div class="template-preview">
                                        <svg width="120" height="80" viewBox="0 0 120 80">
                                            <rect x="10" y="10" width="100" height="60" fill="#f3e5f5" stroke="#4a148c" stroke-width="1"/>
                                            <text x="60" y="25" font-size="10" text-anchor="middle" font-weight="bold" fill="#4a148c">类名</text>
                                            <line x1="10" y1="30" x2="110" y2="30" stroke="#4a148c" stroke-width="1"/>
                                            <text x="15" y="45" font-size="8" fill="#4a148c">+ 属性1: 类型</text>
                                            <text x="15" y="55" font-size="8" fill="#4a148c">- 属性2: 类型</text>
                                            <line x1="10" y1="60" x2="110" y2="60" stroke="#4a148c" stroke-width="1"/>
                                            <text x="15" y="70" font-size="8" fill="#4a148c">+ 方法1()</text>
                                            <text x="15" y="80" font-size="8" fill="#4a148c">- 方法2()</text>
                                        </svg>
                                    </div>
                                </div>
                                <div class="template-item" data-template="state">
                                    <div class="template-name">状态图</div>
                                    <div class="template-preview">
                                        <svg width="120" height="80" viewBox="0 0 120 80">
                                            <ellipse cx="30" cy="40" rx="20" ry="15" fill="#e8f5e8" stroke="#2e7d32" stroke-width="1"/>
                                            <text x="30" y="43" font-size="8" text-anchor="middle" fill="#2e7d32">状态1</text>
                                            <ellipse cx="90" cy="40" rx="20" ry="15" fill="#e8f5e8" stroke="#2e7d32" stroke-width="1"/>
                                            <text x="90" y="43" font-size="8" text-anchor="middle" fill="#2e7d32">状态2</text>
                                            <path d="M 50 40 L 70 40" stroke="#2e7d32" stroke-width="1" marker-end="url(#arrowhead3)"/>
                                            <text x="60" y="35" font-size="6" text-anchor="middle" fill="#2e7d32">事件</text>
                                            <defs>
                                                <marker id="arrowhead3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                                                    <polygon points="0 0, 10 3.5, 0 7" fill="#2e7d32"/>
                                                </marker>
                                            </defs>
                                        </svg>
                                    </div>
                                </div>
                                <div class="template-item" data-template="gantt">
                                    <div class="template-name">甘特图</div>
                                    <div class="template-preview">
                                        <svg width="120" height="80" viewBox="0 0 120 80">
                                            <rect x="10" y="10" width="100" height="60" fill="#fff3e0" stroke="#e65100" stroke-width="1"/>
                                            <rect x="20" y="20" width="30" height="10" fill="#ff9800"/>
                                            <rect x="60" y="35" width="40" height="10" fill="#ff9800"/>
                                            <text x="15" y="28" font-size="6" fill="#e65100">任务1</text>
                                            <text x="65" y="43" font-size="6" fill="#e65100">任务2</text>
                                            <text x="60" y="55" font-size="8" text-anchor="middle" fill="#e65100">时间轴</text>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="editor" class="code-editor"></div>
            </div>

            <!-- 右侧渲染区 -->
            <div class="render-section">
                <div class="section-header">
                    <h2>渲染结果</h2>
                    <div class="theme-selector">
                        <button id="theme-toggle" class="btn btn-secondary">
                            <span class="icon">🌙</span>
                            主题
                            <span class="dropdown-arrow">▼</span>
                        </button>
                        <div id="theme-dropdown" class="dropdown hidden">
                            <div class="dropdown-content">
                                <div class="dropdown-item" data-theme="default">默认</div>
                                <div class="dropdown-item" data-theme="dark">黑暗</div>
                                <div class="dropdown-item" data-theme="forest">森林</div>
                                <div class="dropdown-item" data-theme="neutral">中性</div>
                                <div class="dropdown-item" data-theme="base">基础</div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="render-area" class="render-area">
                    <div class="render-toolbar">
                        <button class="render-btn" id="btn-reset" title="重置"><span class="icon-toolbar">⛶</span></button>
                        <div class="divider"></div>
                        <button class="render-btn" id="btn-zoom-out" title="缩小"><span class="icon-toolbar">&#8722;</span></button>
                        <button class="render-btn" id="btn-zoom-in" title="放大"><span class="icon-toolbar">&#43;</span></button>
                        <div class="divider"></div>
                        <button class="render-btn" id="btn-maximize" title="最大化"><span class="icon-toolbar">&#8599;</span></button>
                    </div>
                    <div class="placeholder" id="svg-container">
                        在左侧输入 Mermaid 代码，这里将显示渲染结果
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 设置窗体 -->
    <div id="settings-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3>设置</h3>
                <button id="close-settings" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="settings-container">
                    <!-- 左侧设置分类 -->
                    <div class="settings-tabs">
                        <div class="tab-item active" data-tab="storage">
                            <span class="tab-icon">💾</span>
                            存储
                        </div>
                        <!-- 可以在这里添加更多设置分类 -->
                    </div>
                    
                    <!-- 右侧设置内容 -->
                    <div class="settings-content">
                        <!-- 存储设置 -->
                        <div id="storage-settings" class="settings-panel active">
                            <div class="setting-group">
                                <label for="storage-type">存储方式</label>
                                <select id="storage-type" class="setting-input">
                                    <option value="indexed-db">IndexedDB</option>
                                    <option value="supabase">Supabase</option>
                                </select>
                            </div>
                            
                            <div id="supabase-settings" class="setting-group hidden">
                                <div class="setting-group">
                                    <label for="supabase-url">Base URL</label>
                                    <input type="url" id="supabase-url" class="setting-input" placeholder="https://your-project.supabase.co">
                                </div>
                                <div class="setting-group">
                                    <label for="supabase-key">ANON Key</label>
                                    <input type="text" id="supabase-key" class="setting-input" placeholder="your-anon-key">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button id="save-settings" class="btn btn-primary">保存</button>
                <button id="cancel-settings" class="btn btn-secondary">取消</button>
            </div>
        </div>
    </div>

    <script type="module" src="./src/main.js"></script>
    <!-- <script type="module" src="./src/db.js"></script> -->
</body>
</html> 